<!DOCTYPE html>
<html ng-app="loginManagement">
<head>
<meta charset="UTF-8">
<title>Propozal Admin</title>
<meta
	content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'
	name='viewport'>
<!-- Bootstrap 3.3.2 -->
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"
	type="text/css" />
<!-- Font Awesome Icons -->
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css" />
<!-- Ionicons -->
<link
	href="http://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css"
	rel="stylesheet" type="text/css" />
<!-- DATA TABLES -->
<link href="plugins/datatables/dataTables.bootstrap.css"
	rel="stylesheet" type="text/css" />
<!-- Theme style -->
<link href="dist/css/style.css" rel="stylesheet" type="text/css" />
<link href="dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
<!-- AdminLTE Skins. Choose a skin from the css/skins 
         folder instead of downloading all of them to reduce the load. -->
<link href="dist/css/skins/_all-skins.min.css" rel="stylesheet"
	type="text/css" />



<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
<script src="js/angular.min.js"></script>
<script src="js/angular-route.min.js"></script>
<script src="lib/angular-modal-service.js"></script>
<script>
	var myApp = angular.module('loginManagement', []);

	myApp.controller('LogInCtrl', function($scope, $log, $window, $http) {
		$scope.login = function() {
			if ($scope.loginForm.$valid) {
				
				$scope.endPointURL;
				
				$http.get("json/endPoint.json")
			    .success(function(data) {
			  	  $scope.endPointURL= data.endPoint;
			         console.log($scope.endPointURL);
			         
						/* var username = $scope.username;
						var password = $scope.password; */
										
						$scope.vals = {
								username: $scope.username,
								password: $scope.password						
		                    };
								
						 var serviceURL=$scope.endPointURL+"/login/";
						
						$http.post(serviceURL,$scope.vals)							
										.success(
								function(data) {
									
									console.log(data);
									
									$scope.response=data.entity.response;
								
									if ($scope.response == "success") {
										
										sessionStorage.userName = data.entity.userName;
										
										var url = "http://" + $window.location.host
												+ "/PropozalAdmin/index1.html";
										$log.log(url);
										$window.location.href = url;
									} else {
										alert("Wrong Information");
									}
								})   
			  });
			}

		};

	});
</script>
</head>
<body class="login-bg">

	<div class="container" ng-controller="LogInCtrl">
		<div class="row">
			<div class="col-md-5" style="margin-left:30%;">
				<div class="login-panel panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title text-center">
							<img src="images/logo.png">
						</h3>
					</div>
					<div class="panel-body">
						<form name="loginForm" id="myLogin" novalidate ng-submit="login()">
							<fieldset>
								<div class="form-group">
									<input class="form-control" placeholder="User Name"
										name="username" id="username" ng-model="username" required>
									<p
										ng-show="loginForm.username.$invalid && !loginForm.username.$pristine"
										class="help-block" style="color: #FF0000">User Name is
										Required.</p>
								</div>
								<div class="form-group">
									<input class="form-control" placeholder="Password"
										name="password" type="password" id="password"
										ng-model="password" required>
									<p
										ng-show="loginForm.password.$invalid && !loginForm.password.$pristine"
										class="help-block" style="color: #FF0000">Password is
										Required.</p>
								</div>
								
								<button type="submit" class="bttn "
									ng-disabled="loginForm.$invalid">Login</button>
							</fieldset>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- jQuery 2.1.3 -->
	<script src="plugins/jQuery/jQuery-2.1.3.min.js"></script>
	<!-- Bootstrap 3.3.2 JS -->
	<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<!-- DATA TABES SCRIPT -->
	<script src="plugins/datatables/jquery.dataTables.js"
		type="text/javascript"></script>
	<script src="plugins/datatables/dataTables.bootstrap.js"
		type="text/javascript"></script>
	<!-- SlimScroll -->
	<script src="plugins/slimScroll/jquery.slimscroll.min.js"
		type="text/javascript"></script>
	<!-- FastClick -->
	<script src='plugins/fastclick/fastclick.min.js'></script>
	<!-- AdminLTE App -->
	<script src="dist/js/app.min.js" type="text/javascript"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="dist/js/demo.js" type="text/javascript"></script>
	<!-- page script -->
	<script type="text/javascript">
		$(function() {
			$("#example1").dataTable();
			$('#example2').dataTable({
				"bPaginate" : true,
				"bLengthChange" : false,
				"bFilter" : false,
				"bSort" : true,
				"bInfo" : true,
				"bAutoWidth" : false
			});
		});
	</script>

</body>
</html>
